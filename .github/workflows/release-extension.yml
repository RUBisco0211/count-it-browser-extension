name: Release Extension

on:
    push:
        tags:
            - "v*"

permissions:
    contents: write

jobs:
    build-release:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout
              uses: actions/checkout@v4

            - name: Create package
              run: |
                  mkdir -p dist
                  cd extension
                  zip -r ../dist/count-it-extension.zip .

            - name: Upload release
              uses: softprops/action-gh-release@v2
              with:
                  files: dist/count-it-extension.zip
                  generate_release_notes: true
